import{_ as y,u as b,a as U,r as f,k,b as n,c as P,d as R,e as t,h as o,w as a,l as T,n as h,p as q,v as z,q as A,i as u,E as _}from"./main-ca0a91d8.js";const C={class:"register-page"},M={class:"register-container"},B={class:"register-card"},D={class:"register-links"},N={__name:"Register",setup(S){const w=b(),v=U(),m=f(),g=f(!1),s=k({userId:"",username:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}),c={userId:[{required:!0,message:"请输入用户ID",trigger:"blur"},{validator:(d,e,r)=>{e&&!h(e)?r(new Error("用户ID长度应在3-50个字符之间")):r()},trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:(d,e,r)=>{e&&!q(e)?r(new Error("用户名长度应在2-100个字符之间")):r()},trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{validator:(d,e,r)=>{e&&!z(e)?r(new Error("请输入有效的邮箱地址")):r()},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:(d,e,r)=>{e&&!A(e)?r(new Error("密码长度至少6位")):r()},trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(d,e,r)=>{e===""?r(new Error("请再次输入密码")):e!==s.password?r(new Error("两次输入的密码不一致")):r()},trigger:"blur"}],agreeTerms:[{validator:(d,e,r)=>{e?r():r(new Error("请同意服务条款和隐私政策"))},trigger:"change"}]},p=async()=>{m.value&&await m.value.validate(async d=>{var e,r;if(d){g.value=!0;try{await v.registerUser({userId:s.userId,username:s.username,email:s.email,password:s.password}),_.success("注册成功，请登录"),w.push("/login")}catch(i){_.error(((r=(e=i.response)==null?void 0:e.data)==null?void 0:r.message)||"注册失败")}finally{g.value=!1}}})};return(d,e)=>{const r=n("el-input"),i=n("el-form-item"),V=n("el-checkbox"),x=n("el-button"),E=n("el-form"),I=n("router-link");return P(),R("div",C,[t("div",M,[t("div",B,[e[9]||(e[9]=t("div",{class:"register-header"},[t("h1",null,"注册 锐界幻境"),t("p",null,"创建您的账户，开启全新体验")],-1)),o(E,{ref_key:"registerFormRef",ref:m,model:s,rules:c,class:"register-form",onSubmit:T(p,["prevent"])},{default:a(()=>[o(i,{prop:"userId"},{default:a(()=>[o(r,{modelValue:s.userId,"onUpdate:modelValue":e[0]||(e[0]=l=>s.userId=l),placeholder:"用户ID",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(i,{prop:"username"},{default:a(()=>[o(r,{modelValue:s.username,"onUpdate:modelValue":e[1]||(e[1]=l=>s.username=l),placeholder:"用户名",size:"large","prefix-icon":"Avatar"},null,8,["modelValue"])]),_:1}),o(i,{prop:"email"},{default:a(()=>[o(r,{modelValue:s.email,"onUpdate:modelValue":e[2]||(e[2]=l=>s.email=l),placeholder:"邮箱地址",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),o(i,{prop:"password"},{default:a(()=>[o(r,{modelValue:s.password,"onUpdate:modelValue":e[3]||(e[3]=l=>s.password=l),type:"password",placeholder:"密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(i,{prop:"confirmPassword"},{default:a(()=>[o(r,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=l=>s.confirmPassword=l),type:"password",placeholder:"确认密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(i,null,{default:a(()=>[o(V,{modelValue:s.agreeTerms,"onUpdate:modelValue":e[5]||(e[5]=l=>s.agreeTerms=l)},{default:a(()=>[...e[6]||(e[6]=[u(" 我已阅读并同意 ",-1),t("a",{href:"#",class:"link"},"服务条款",-1),u(" 和 ",-1),t("a",{href:"#",class:"link"},"隐私政策",-1)])]),_:1},8,["modelValue"])]),_:1}),o(i,null,{default:a(()=>[o(x,{type:"primary",size:"large",loading:g.value,onClick:p,class:"register-button"},{default:a(()=>[...e[7]||(e[7]=[u(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),t("div",D,[o(I,{to:"/login",class:"link"},{default:a(()=>[...e[8]||(e[8]=[u("已有账户？立即登录",-1)])]),_:1})])]),e[10]||(e[10]=t("div",{class:"register-footer"},[t("p",null,"© 2024 MiragEdge. All rights reserved.")],-1))])])}}},G=y(N,[["__scopeId","data-v-9fff2273"]]);export{G as default};
