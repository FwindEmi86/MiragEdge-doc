"use strict";(self.webpackChunkdoc_web=self.webpackChunkdoc_web||[]).push([[997],{6642:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"study/heat\u9898\u76ee\u8be6\u89e3","title":"heat\u9898\u76ee\u8be6\u89e3","description":"OpenStack\u7684Heat\u7ec4\u4ef6\u8be6\u89e3 - yyuuee - \u535a\u5ba2\u56ed","source":"@site/docs/study/heat\u9898\u76ee\u8be6\u89e3.md","sourceDirName":"study","slug":"/docs/study/heat\u9898\u76ee\u8be6\u89e3","permalink":"/docs/study/heat\u9898\u76ee\u8be6\u89e3","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1764387616000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4,"slug":"/docs/study/heat\u9898\u76ee\u8be6\u89e3","title":"heat\u9898\u76ee\u8be6\u89e3"}}');var a=n(4848),o=n(8453);const s={sidebar_position:4,slug:"/docs/study/heat\u9898\u76ee\u8be6\u89e3",title:"heat\u9898\u76ee\u8be6\u89e3"},c=void 0,i={},l=[{value:"OpenStack Heat\u8fd0\u7ef4\uff1a\u521b\u5efa\u5bb9\u5668",id:"openstack-heat\u8fd0\u7ef4\u521b\u5efa\u5bb9\u5668",level:2},{value:"OpenStack Heat\u8fd0\u7ef4\uff1a\u521b\u5efa\u786c\u76d8",id:"openstack-heat\u8fd0\u7ef4\u521b\u5efa\u786c\u76d8",level:2},{value:"OpenStack Heat\u8fd0\u7ef4\uff1a\u521b\u5efa\u7f51\u7edc",id:"openstack-heat\u8fd0\u7ef4\u521b\u5efa\u7f51\u7edc",level:2},{value:"OpenStack Heat\u8fd0\u7ef4\uff1a\u521b\u5efa\u7528\u6237",id:"openstack-heat\u8fd0\u7ef4\u521b\u5efa\u7528\u6237",level:2},{value:"OpenStack Heat\u8fd0\u7ef4\uff1a\u521b\u5efa\u7528\u6237",id:"openstack-heat\u8fd0\u7ef4\u521b\u5efa\u7528\u6237-1",level:2}];function p(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"https://www.cnblogs.com/yyuuee/p/14180834.html",children:"OpenStack\u7684Heat\u7ec4\u4ef6\u8be6\u89e3 - yyuuee - \u535a\u5ba2\u56ed"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:"#\u67e5\u8be2\u7248\u672c\r\n[root@controller ~]# openstack orchestration template version  list \r\n+--------------------------------------+------+------------------------------+\r\n| Version                              | Type | Aliases                      |\r\n+--------------------------------------+------+------------------------------+\r\n| AWSTemplateFormatVersion.2010-09-09  | cfn  |                              |\r\n| HeatTemplateFormatVersion.2012-12-12 | cfn  |                              |\r\n| heat_template_version.2013-05-23     | hot  |                              |\r\n| heat_template_version.2014-10-16     | hot  |                              |\r\n| heat_template_version.2015-04-30     | hot  |                              |\r\n| heat_template_version.2015-10-15     | hot  |                              |\r\n| heat_template_version.2016-04-08     | hot  |                              |\r\n| heat_template_version.2016-10-14     | hot  | heat_template_version.newton |\r\n| heat_template_version.2017-02-24     | hot  | heat_template_version.ocata  |\r\n| heat_template_version.2017-09-01     | hot  | heat_template_version.pike   |\r\n| heat_template_version.2018-03-02     | hot  | heat_template_version.queens |\r\n| heat_template_version.2018-08-31     | hot  | heat_template_version.rocky  |\r\n+--------------------------------------+------+------------------------------+\r\n#heat\u6a21\u677f\u57fa\u672c\u5185\u5bb9\r\nheat_template_version: 2018-08-31\r\nresources:\r\n  server: #<\u8d44\u6e90\u540d>\r\n    type: OS::Nova::Server #\u7c7b\u578b\r\n    properties: #\u5c5e\u6027\r\n#\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u6a21\u677f\r\nHeatTemplateFormatVersion: '2012-12-12'\r\nResources:\r\n__alarm__:\r\nType: OS::Aodh::Alarm\r\nProperties:\r\n#\u67e5\u627e\u8d44\u6e90\u540d\u79f0\uff0c\u7b2c\u4e00\u79cd\u65b9\u6cd5\uff0c\u4f7f\u7528dashboard\uff0c\u6d6a\u8d39\u65f6\u95f4\u3002\u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff0c\u4f7f\u7528\u547d\u4ee4\u884c\u6765\u5b8c\u6210\u3002\r\n#\u4f7f\u7528\u547d\u4ee4\u884c\u8fdb\u884c\u67e5\u8be2\r\n[root@controller ~]# openstack orchestration resource type list | grep Container\r\n| OS::Swift::Container                     |\r\n#\u67e5\u8be2\u5c5e\u6027\r\n#\u4f7f\u7528\u547d\u4ee4\u884c\u8fdb\u884c\u67e5\u8be2\r\n[root@controller ~]# openstack orchestration resource type show OS::Swift::Container \r\n...\r\n#\u6839\u636e\u9898\u76ee\u9700\u6c42\u7f16\u5199yaml\u6587\u4ef6\r\nheat_template_version: 2018-08-31\r\nresources:\r\n  container:\r\n    type: OS::Swift::Container\r\n    properties:\r\nname:\"heat-swift\"\r\n#\u521b\u5efa\u7f16\u6392\u6587\u4ef6\r\n[root@controller ~]# openstack stack create -t create_container.yaml test\r\n+---------------------+--------------------------------------+\r\n| Field               | Value                                |\r\n+---------------------+--------------------------------------+\r\n| id                  | bd085ff1-0595-4a15-84be-e4c7782e5c5c |\r\n| stack_name          | test                                 |\r\n| description         | No description                       |\r\n| creation_time       | 2025-01-22T01:38:22Z                 |\r\n| updated_time        | None                                 |\r\n| stack_status        | CREATE_IN_PROGRESS                   |\r\n| stack_status_reason | Stack CREATE started                 |\r\n+---------------------+--------------------------------------+\r\n#\u68c0\u67e5\u662f\u5426\u521b\u5efa\u6210\u529f\r\n[root@controller ~]# openstack stack list \r\n+--------------------------------------+------------+----------------------------------+-----------------+----------\r\n------------+--------------+\r\n| ID                                   | Stack Name | Project                          | Stack Status    | Creation \r\nTime        | Updated Time |\r\n+--------------------------------------+------------+----------------------------------+-----------------+----------\r\n------------+--------------+\r\n| bd085ff1-0595-4a15-84be-e4c7782e5c5c | test       | 4a4adc84b02745dab568a134e40b2f08 | CREATE_COMPLETE | 2025-01-2\r\n2T01:38:22Z | None         |\r\n+--------------------------------------+------------+----------------------------------+-----------------+----------\r\n------------+--------------+\r\n#\u5982\u679c\u521b\u5efa\u4e0d\u6210\u529f\uff0c\u5220\u9664\r\n[root@controller ~]# openstack stack delete test\r\nAre you sure you want to delete this stack(s) [y/N]? y\r\n\n"})}),"\n",(0,a.jsx)(t.h2,{id:"openstack-heat\u8fd0\u7ef4\u521b\u5efa\u5bb9\u5668",children:"OpenStack Heat\u8fd0\u7ef4\uff1a\u521b\u5efa\u5bb9\u5668"}),"\n",(0,a.jsx)(t.p,{children:"\u5728\u81ea\u884c\u642d\u5efa\u7684OpenStack\u79c1\u6709\u4e91\u5e73\u53f0\u4e0a \uff0c \u5728/root\u76ee\u5f55\u4e0b\u7f16\u5199Heat\u6a21\u677fcreate_container.yaml\uff0c\u8981\u6c42\u6267\u884cyaml\u6587\u4ef6\u53ef\u4ee5\u521b\u5efa\u540d\u4e3aheat-swift\u7684\u5bb9\u5668\u3002"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:'heat_template_version: 2018-08-31\r\nresources:\r\n  container:\r\n    type: OS::Swift::Container\r\n    properties:\r\nname:"heat-swift"\n'})}),"\n",(0,a.jsx)(t.h2,{id:"openstack-heat\u8fd0\u7ef4\u521b\u5efa\u786c\u76d8",children:"OpenStack Heat\u8fd0\u7ef4\uff1a\u521b\u5efa\u786c\u76d8"}),"\n",(0,a.jsx)(t.p,{children:"\u5728\u81ea\u884c\u642d\u5efa\u7684OpenStack\u79c1\u6709\u4e91\u5e73\u53f0\u4e0a\uff0c\u5728/root\u76ee\u5f55\u4e0b\u7f16\u5199Heat\u6a21\u677fheat_cinder.yaml\uff0c\u8981\u6c42\u6267\u884cyaml\u6587\u4ef6\u53ef\u4ee5\u521b\u5efa\u540d\u4e3aheat-cinder\uff0c\u5927\u5c0f\u4e3a2G\u7684\u4e91\u786c\u76d8\u3002"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:'heat_template_version: 2018-08-31\r\nresources:\r\n  cinder:\r\n    type: OS::Cinder::Volume\r\n    properties:\r\n      name: "heat-cinder"\r\n      size: 2\n'})}),"\n",(0,a.jsx)(t.h2,{id:"openstack-heat\u8fd0\u7ef4\u521b\u5efa\u7f51\u7edc",children:"OpenStack Heat\u8fd0\u7ef4\uff1a\u521b\u5efa\u7f51\u7edc"}),"\n",(0,a.jsx)(t.p,{children:"\u5728\u81ea\u884c\u642d\u5efa\u7684OpenStack\u79c1\u6709\u4e91\u5e73\u53f0\u4e0a\uff0c\u5728/root\u76ee\u5f55\u4e0b\u7f16\u5199Heat\u6a21\u677fcreate_network.yaml\uff0c\u521b\u5efa\u540d\u4e3aHeat-Network\u7f51\u7edc\uff0c\u9009\u62e9\u4e0d\u5171\u4eab\uff1b\u521b\u5efa\u5b50\u7f51\u540d\u4e3aHeat-Subnet\uff0c\u5b50\u7f51\u7f51\u6bb5\u8bbe\u7f6e\u4e3a10.20.2.0/24\uff0c\u5f00\u542fDHCP\u670d\u52a1\uff0c\u5730\u5740\u6c60\u4e3a10.20.2.20-10.20.2.100\uff0c\u7f16\u5199\u5b8c\u6210\u4e4b\u540e\u4e0d\u8981\u521b\u5efa\u5806\u6808\u3002"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:'heat_template_version: 2018-08-31\r\nresources:\r\n  net:\r\n    type: OS::Neutron::Net\r\n    properties:\r\nname: "Heat-Network"\r\nshared: False\r\n  subnet:\r\n    type: OS::Neutron::Subnet\r\n    properties:\r\nname: "Heat-Subnet"\r\nallocation_pools:\r\n- start: 10.20.2.20\r\nend: 10.20.2.100\r\ncidr: 10.20.2.0/24\r\nenable_dhcp: True\r\ngateway_ip: 10.20.2.1\r\nip_version: 4\r\nnetwork_id: { get_resource: net }\n'})}),"\n",(0,a.jsx)(t.h2,{id:"openstack-heat\u8fd0\u7ef4\u521b\u5efa\u7528\u6237",children:"OpenStack Heat\u8fd0\u7ef4\uff1a\u521b\u5efa\u7528\u6237"}),"\n",(0,a.jsx)(t.p,{children:"\u7f16\u5199 Heat \u6a21\u677f create_user.yaml\uff0c\u521b\u5efa\u540d\u4e3a heat-user \u7684\u7528\u6237\u3002"}),"\n",(0,a.jsx)(t.p,{children:"\u4f7f\u7528\u81ea\u5df1\u642d\u5efa\u7684OpenStack\u79c1\u6709\u4e91\u5e73\u53f0\uff0c \u4f7f\u7528heat\u7f16\u5199\u6478\u677f(heat_template_version: 2016-04-08)\u521b\u5efa\u540d\u4e3a\u201dchinaskills\u201d\u7684 domain\uff0c\u5728\u6b64 domain \u4e0b\u521b\u5efa\u540d\u4e3a beijing_group \u7684 \u79df \u6237\uff08project\uff09 \uff0c \u5728 \u6b64 \u79df \u6237 \u4e0b \u521b \u5efa \u540d \u4e3a cloud \u7684 \u7528 \u6237 \uff0c \u5c06 \u6b64 \u6587 \u4ef6 \u547d \u540d \u53ca \u4fdd \u5b58 \u5728 /root/user_create.yml\uff0c\u5b8c\u6210\u540e\u63d0\u4ea4 controller \u70b9\u7684\u7528\u6237\u540d\u3001\u5bc6\u7801\u548c IP \u5730\u5740\u5230\u7b54\u9898\u6846\u3002"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:'heat_template_version: 2016-04-08\r\nresources:\r\n  domain:\r\n    type: OS::Keystone::Domain\r\n    properties:\r\nname: "chinaskills"\r\n  project:\r\n    type: OS::Keystone::Project\r\n    properties:\r\nname: "beijing_group"\r\ndomain: { get_resource: domain }\r\n  user:\r\n    type: OS::Keystone::User\r\n    properties:\r\nname: "cloud"\r\ndomain: { get_resource: domain }\r\ndefault_project: { get_resource: project }\n'})}),"\n",(0,a.jsx)(t.h2,{id:"openstack-heat\u8fd0\u7ef4\u521b\u5efa\u7528\u6237-1",children:"OpenStack Heat\u8fd0\u7ef4\uff1a\u521b\u5efa\u7528\u6237"}),"\n",(0,a.jsx)(t.p,{children:"\u5728\u81ea\u884c\u642d\u5efa\u7684 OpenStack \u79c1\u6709\u4e91\u5e73\u53f0\u6216\u8d5b\u9879\u63d0\u4f9b\u7684 all-in-one \u5e73\u53f0\u4e0a\uff0c\u5728/root \u76ee\u5f55\u4e0b\u7f16\u5199 Heat \u6a21\u677f create user.yaml\uff0c\u521b\u5efa\u540d\u4e3a heat-user \u7684\u7528\u6237\uff0c\u5c5e\u4e8e admin \u9879\u76ee\uff08project\uff09\uff0c\u5e76\u8d4b\u4e88 heat-user\u7528\u6237 admin \u7684\u6743\u9650\uff08role\uff09\uff0c\u914d\u7f6e\u7528\u6237\u5bc6\u7801\u4e3a 123456\uff08password\uff09\u3002\u5b8c\u6210\u540e\u63d0\u4ea4\u63a7\u5236\u8282\u70b9\u7684\u7528\u6237\u540d\u3001\u5bc6\u7801\u548cIP \u5730\u5740\u5230\u7b54\u9898\u6846\u3002 (\u5728\u63d0\u4ea4\u4fe1\u606f\u524d\u8bf7\u51c6\u5907\u597d yaml \u6a21\u677f\u6267\u884c\u7684\u73af\u5883)"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:'heat_template_version: 2018-08-31\r\nresources:\r\n  user:\r\n    type: OS::Keystone::User\r\n    properties:\r\nname: "heat-user"\r\npassword: "123456"\r\nroles: [{"role":"admin","project":"admin"}]\n'})})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>c});var r=n(6540);const a={},o=r.createContext(a);function s(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);