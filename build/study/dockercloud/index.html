<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-study/dockercloud" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">2023国赛第九套试卷 | 锐界幻境</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://f.windemiko.top/img/背景.jpg"><meta data-rh="true" name="twitter:image" content="https://f.windemiko.top/img/背景.jpg"><meta data-rh="true" property="og:url" content="https://f.windemiko.top/study/dockercloud"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="2023国赛第九套试卷 | 锐界幻境"><meta data-rh="true" name="description" content="【任务4】Kubernetes容器云平台搭建[5.0分]"><meta data-rh="true" property="og:description" content="【任务4】Kubernetes容器云平台搭建[5.0分]"><link data-rh="true" rel="icon" href="/img/B-LOGO.ico"><link data-rh="true" rel="canonical" href="https://f.windemiko.top/study/dockercloud"><link data-rh="true" rel="alternate" href="https://f.windemiko.top/study/dockercloud" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://f.windemiko.top/study/dockercloud" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.9ba1c3ba.css">
<script src="/assets/js/runtime~main.7ad96a82.js" defer="defer"></script>
<script src="/assets/js/main.1ff08c05.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/B-LOGO.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/B-LOGO.svg" alt="MiragEdge" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/B-LOGO.svg" alt="MiragEdge" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">MiragEdge</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://miragedge.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">官网<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a class="navbar__item navbar__link" href="/docs/intro">文档</a><a href="https://space.bilibili.com/359174372" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">B站主页<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>2023国赛第九套试卷</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="任务4kubernetes容器云平台搭建50分">【任务4】Kubernetes容器云平台搭建[5.0分]<a href="#任务4kubernetes容器云平台搭建50分" class="hash-link" aria-label="【任务4】Kubernetes容器云平台搭建[5.0分]的直接链接" title="【任务4】Kubernetes容器云平台搭建[5.0分]的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="适用平台私有云">【适用平台】私有云<a href="#适用平台私有云" class="hash-link" aria-label="【适用平台】私有云的直接链接" title="【适用平台】私有云的直接链接" translate="no">​</a></h3>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="题目1211-部署容器云平台50分">【题目1】2.1.1 部署容器云平台[5.0分]<a href="#题目1211-部署容器云平台50分" class="hash-link" aria-label="【题目1】2.1.1 部署容器云平台[5.0分]的直接链接" title="【题目1】2.1.1 部署容器云平台[5.0分]的直接链接" translate="no">​</a></h3>
<p>使用OpenStack私有云平台创建两台云主机，分别作为Kubernetes集群的master节点和node节点，然后完成Kubernetes集群的部署，并完成Istio服务网格、KubeVirt虚拟化和Harbor镜像仓库的部署。完成后提交master节点的用户名、密码和IP到答题框。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@xzy-master ~]# curl -O http://172.29.20.222/2023/competition/chinaskills_cloud_paas_v2.1.iso</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@xzy-master ~]# mount -o loop chinaskills_cloud_paas_v2.1.iso /mnt/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mount: /dev/loop0 is write-protected, mounting read-only</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@xzy-master ~]# cp -rvf /mnt/* /opt/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@xzy-master ~]# umount /mnt/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@xzy-master ~]# cp -rvf /opt/kubeeasy-v2.0 /usr/local/bin/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@xzy-master ~]# kubeeasy-v2.0 install dependencies \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; --host 172.29.20.207,172.29.20.236 --user root \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; --password 000000 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; --offline-file /opt/dependencies/packages.tar.gz </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@xzy-master ~]# kubeeasy-v2.0 install kubernetes \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; --master 172.29.20.207 --worker 172.29.20.236 --user root \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; --password 000000 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; --version 1.25.2 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; --offline-file /opt/kubeeasy.tar.gz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@xzy-master ~]# kubeeasy-v2.0 create ssh-keygen \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; --master 172.29.20.207 --worker 172.29.20.236 --user root \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; --password 000000</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# vi /etc/docker/daemon.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;insecure-registries&quot;: [&quot;0.0.0.0/0&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# systemctl daemon-reload </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# systemctl restart docker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# docker login -uadmin -pHarbor12345 172.29.20.207</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING! Using --password via the CLI is insecure. Use --password-stdin.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Configure a credential helper to remove this warning. See</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Login Succeeded</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测">检测：<a href="#检测" class="hash-link" aria-label="检测：的直接链接" title="检测：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# kubectl cluster-info</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Kubernetes control plane is running at https://apiserver.cluster.local:6443</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CoreDNS is running at https://apiserver.cluster.local:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To further debug and diagnose cluster problems, use &#x27;kubectl cluster-info dump&#x27;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# kubectl -n istio-system get all</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Warning: kubevirt.io/v1 VirtualMachineInstancePresets is now deprecated and will be removed in v2.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                        READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pod/grafana-56bdf8bf85-gv5lv                1/1     Running   0          82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pod/istio-egressgateway-fffc799cf-r49f9     1/1     Running   0          82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pod/istio-ingressgateway-7d68764b55-pdfb2   1/1     Running   0          82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pod/istiod-5456fd558d-tmk5h                 1/1     Running   0          82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pod/jaeger-c4fdf6674-h68tp                  1/1     Running   0          82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pod/kiali-8f955f859-wx9xz                   1/1     Running   0          82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pod/prometheus-85949fddb-m4gk5              2/2     Running   0          82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                           TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)                         AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/grafana                NodePort       10.96.250.173   &lt;none&gt;        3000:33000/TCP                  82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/istio-egressgateway    ClusterIP      10.96.170.36    &lt;none&gt;        80/TCP,443/TCP                  82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/istio-ingressgateway   LoadBalancer   10.96.180.24    &lt;pending&gt;     15021:60350/TCP,80:21669/TCP,443:2758/TCP,31400:860/TCP,15443:36161/TCP   82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/istiod                 ClusterIP      10.96.201.73    &lt;none&gt;        15010/TCP,15012/TCP,443/TCP,15014/TCP                                     82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/jaeger-collector       ClusterIP      10.96.189.191   &lt;none&gt;        14268/TCP,14250/TCP,9411/TCP   82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/kiali                  NodePort       10.96.106.156   &lt;none&gt;        20001:30001/TCP,9090:39091/TCP 82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/prometheus             NodePort       10.96.103.86    &lt;none&gt;        9090:39090/TCP                  82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/tracing                NodePort       10.96.228.55    &lt;none&gt;        80:36686/TCP,16685:36685/TCP   82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/zipkin                 NodePort       10.96.4.187     &lt;none&gt;        9411:39411/TCP                  82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                   READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/grafana                1/1     1            1           82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/istio-egressgateway    1/1     1            1           82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/istio-ingressgateway   1/1     1            1           82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/istiod                 1/1     1            1           82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/jaeger                 1/1     1            1           82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/kiali                  1/1     1            1           82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/prometheus             1/1     1            1           82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                              DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">replicaset.apps/grafana-56bdf8bf85                1         1         1       82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">replicaset.apps/istio-egressgateway-fffc799cf     1         1         1       82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">replicaset.apps/istio-ingressgateway-7d68764b55   1         1         1       82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">replicaset.apps/istiod-5456fd558d                 1         1         1       82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">replicaset.apps/jaeger-c4fdf6674                  1         1         1       82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">replicaset.apps/kiali-8f955f859                   1         1         1       82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">replicaset.apps/prometheus-85949fddb              1         1         1       82m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# kubectl -n kubevirt get deployment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME              READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">virt-api          2/2     2            2           84m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">virt-controller   2/2     2            2           83m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">virt-operator     2/2     2            2           84m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# docker login -u admin -p Harbor12345 $(hostname -i)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING! Using --password via the CLI is insecure. Use --password-stdin.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Configure a credential helper to remove this warning. See</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Login Succeeded</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="任务5kubernetes容器云服务运维100分">【任务5】Kubernetes容器云服务运维[10.0分]<a href="#任务5kubernetes容器云服务运维100分" class="hash-link" aria-label="【任务5】Kubernetes容器云服务运维[10.0分]的直接链接" title="【任务5】Kubernetes容器云服务运维[10.0分]的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="适用平台私有云-1">【适用平台】私有云<a href="#适用平台私有云-1" class="hash-link" aria-label="【适用平台】私有云的直接链接" title="【适用平台】私有云的直接链接" translate="no">​</a></h3>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="题目1221-容器化部署mariadb-05分">【题目1】2.2.1 容器化部署MariaDB [0.5分]<a href="#题目1221-容器化部署mariadb-05分" class="hash-link" aria-label="【题目1】2.2.1 容器化部署MariaDB [0.5分]的直接链接" title="【题目1】2.2.1 容器化部署MariaDB [0.5分]的直接链接" translate="no">​</a></h3>
<p>编写Dockerfile文件构建mysql镜像，要求基于centos完成MariaDB数据库的安装和配置，并设置服务开机自启。完成后构建镜像，并提交master节点的IP地址、用户名和密码到答题框。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# curl -O http://172.29.20.222/2023/competition/ERP.tar.gz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# tar -xzvf ERP.tar.gz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">……</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# cd ERP/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# docker load -i CentOS_7.9.2009.tar </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# vi local.repo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[yum]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name=yum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">baseurl=file:///root/yum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">enabled=1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gpgcheck=0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# vi Dockerfile-mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FROM centos:centos7.9.2009</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MAINTAINER Chinaskills</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN rm -rf /etc/yum.repos.d/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY local.repo /etc/yum.repos.d/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY yum /root/yum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ENV LC_ALL en_US.UTF-8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN yum install -y mariadb-server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY jsh_erp.sql /root/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY mysql_init.sh /root/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN sh /root/mysql_init.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EXPOSE 3306</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CMD [&quot;mysqld_safe&quot;,&quot;--user=root&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# vi mysql_init.sh </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql_install_db --user=root</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysqld_safe --user=root &amp; sleep 8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysqladmin -uroot password &#x27;tshoperp&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql -uroot -ptshoperp -e &quot;grant all on *.* to root@&#x27;%&#x27; identified by &#x27;tshoperp&#x27;;create database jsh_erp;use jsh_erp;source /root/jsh_erp.sql;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# docker build -t erp-mysql:v1.0 -f Dockerfile-mysql .</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测-1">检测：<a href="#检测-1" class="hash-link" aria-label="检测：的直接链接" title="检测：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# docker run -d --name mariadb-exam-jiance erp-mysql:v1.0 &amp;&amp; sleep 15 &amp;&amp; docker exec mariadb-exam-jiance mysql -uroot -ptshoperp -e &quot;show databases&quot; &amp;&amp; docker rm -f mariadb-exam-jiance   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">7bfb08605ac1dcf083ef3da985ea0fd09aad2c6ffe96c431da4f4c1c69f74ae6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Database</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">information_schema</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">jsh_erp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">performance_schema</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mariadb-exam-jiance</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测点">检测点：<a href="#检测点" class="hash-link" aria-label="检测点：的直接链接" title="检测点：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">jsh_erp</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="题目2222-容器化部署redis-05分">【题目2】2.2.2 容器化部署Redis [0.5分]<a href="#题目2222-容器化部署redis-05分" class="hash-link" aria-label="【题目2】2.2.2 容器化部署Redis [0.5分]的直接链接" title="【题目2】2.2.2 容器化部署Redis [0.5分]的直接链接" translate="no">​</a></h3>
<p>编写Dockerfile文件构建redis镜像，要求基于centos完成Redis服务的安装和配置，并设置服务开机自启。完成后构建镜像，并提交master节点的IP地址、用户名和密码到答题框。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# vim Dockerfile-redis</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FROM centos:centos7.9.2009</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MAINTAINER Chinaskills</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN rm -rf /etc/yum.repos.d/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY local.repo /etc/yum.repos.d/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY yum /root/yum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN yum -y install redis</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN sed -i &#x27;/bind/s/127.0.0.1/0.0.0.0/;/-mode/s/yes/no/&#x27; /etc/redis.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EXPOSE 6379</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CMD [&quot;redis-server&quot;,&quot;/etc/redis.conf&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# docker build -t erp-redis:v1.0 -f Dockerfile-redis .</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测-2">检测：<a href="#检测-2" class="hash-link" aria-label="检测：的直接链接" title="检测：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# docker run -d --name redis-exam-jiance erp-redis:v1.0 &amp;&amp; sleep 10 &amp;&amp; docker exec redis-exam-jiance redis-cli -p 6379 info &amp;&amp; docker rm -f redis-exam-jiance</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">431846511da147fdc3c6cfb3397025d6232ca25719b70ea8f577bddf3720288c</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">redis_version:3.2.12</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">redis_git_sha1:00000000</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">redis_git_dirty:0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">redis_build_id:7897e7d0e13773f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">redis_mode:standalone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">os:Linux 3.10.0-1160.el7.x86_64 x86_64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">arch_bits:64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">multiplexing_api:epoll</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gcc_version:4.8.5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">process_id:1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">run_id:9229aeae81e85c7df857fb861491e98627ec0e83</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tcp_port:6379</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">uptime_in_seconds:10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">uptime_in_days:0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hz:10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lru_clock:10912960</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">executable:/redis-server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">config_file:/etc/redis.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">……</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测点-1">检测点：<a href="#检测点-1" class="hash-link" aria-label="检测点：的直接链接" title="检测点：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">redis_version:3.2.12 &amp;&amp; redis_mode:standalone</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="题目3223-容器化部署nginx-05分">【题目3】2.2.3 容器化部署Nginx [0.5分]<a href="#题目3223-容器化部署nginx-05分" class="hash-link" aria-label="【题目3】2.2.3 容器化部署Nginx [0.5分]的直接链接" title="【题目3】2.2.3 容器化部署Nginx [0.5分]的直接链接" translate="no">​</a></h3>
<p>编写Dockerfile文件构建nginx镜像，要求基于centos完成Nginx服务的安装和配置，并设置服务开机自启。完成后构建镜像，并提交master节点的IP地址、用户名和密码到答题框。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# vim Dockerfile-nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FROM centos:centos7.9.2009</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MAINTAINER Chinaskills</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN rm -rf /etc/yum.repos.d/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY local.repo /etc/yum.repos.d/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY yum /root/yum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN yum -y install nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY nginx/nginx.conf /etc/nginx/nginx.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY nginx/app.tar.gz /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN tar -zxvf app.tar.gz -C /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN /bin/bash -c &quot;echo init ok&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EXPOSE 80</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CMD [&quot;nginx&quot;,&quot;-g&quot;,&quot;daemon off;&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# docker build -t erp-nginx:v1.0 -f Dockerfile-nginx .</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测-3">检测：<a href="#检测-3" class="hash-link" aria-label="检测：的直接链接" title="检测：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# docker rm -f nginx-exam-jiance &gt; /dev/null 2&gt;&amp;1 &amp;&amp; docker run -d --name=nginx-exam-jiance --restart=always erp-nginx:v1.0 &amp;&amp; sleep 5s &amp;&amp; docker logs nginx-exam-jiance &amp;&amp; docker rm -f nginx-exam-jiance</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">7d9340ce7b12c24a41da16cb25057a19d62252b59c4430efdd1df1dffa582be3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx: [emerg] host not found in upstream &quot;erp-server&quot; in /etc/nginx/nginx.conf:24</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx: [emerg] host not found in upstream &quot;erp-server&quot; in /etc/nginx/nginx.conf:24</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx: [emerg] host not found in upstream &quot;erp-server&quot; in /etc/nginx/nginx.conf:24</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx: [emerg] host not found in upstream &quot;erp-server&quot; in /etc/nginx/nginx.conf:24</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx: [emerg] host not found in upstream &quot;erp-server&quot; in /etc/nginx/nginx.conf:24</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx: [emerg] host not found in upstream &quot;erp-server&quot; in /etc/nginx/nginx.conf:24</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx-exam-jiance</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测点-2">检测点：<a href="#检测点-2" class="hash-link" aria-label="检测点：的直接链接" title="检测点：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">erp-server</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="题目4224-容器化部署erp-05分">【题目4】2.2.4 容器化部署ERP [0.5分]<a href="#题目4224-容器化部署erp-05分" class="hash-link" aria-label="【题目4】2.2.4 容器化部署ERP [0.5分]的直接链接" title="【题目4】2.2.4 容器化部署ERP [0.5分]的直接链接" translate="no">​</a></h3>
<p>编写Dockerfile文件构建erp镜像，要求基于centos完成JDK环境和ERP服务的安装与配置，并设置服务开机自启。完成后构建镜像，并提交master节点的IP地址、用户名和密码到答题框。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# vim Dockerfile-erp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FROM centos:centos7.9.2009</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MAINTAINER Chinaskills</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN rm -rf /etc/yum.repos.d/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY local.repo /etc/yum.repos.d/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY yum /root/yum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN yum -y install java-1.8.0-openjdk java-1.8.0-openjdk-devel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COPY app.jar /root/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EXPOSE 9999</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CMD java -jar /root/app.jar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# docker build -t erp-service:v1.0 -f Dockerfile-erp .</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测-4">检测：<a href="#检测-4" class="hash-link" aria-label="检测：的直接链接" title="检测：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# docker run -d --name erp-exam-jiance --restart=always erp-server:v1.0 &amp;&amp; docker exec erp-exam-jiance java -version &amp;&amp; docker exec erp-exam-jiance ps -aux &amp;&amp; docker rm -f erp-exam-jiance</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">370e4a6d516f732e0a42664c1bdd944517673ef5ece5cbc41ce68b41cd159efb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">openjdk version &quot;1.8.0_312&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">OpenJDK Runtime Environment (build 1.8.0_312-b07)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">OpenJDK 64-Bit Server VM (build 25.312-b07, mixed mode)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">root         1  0.0  0.2 6526132 43240 ?       Ssl  13:56   0:00 java -jar /root/app.jar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">root        41  0.0  0.0  51732  1696 ?        Rs   13:56   0:00 ps -aux</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">erp-exam-jiance</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测点-3">检测点：<a href="#检测点-3" class="hash-link" aria-label="检测点：的直接链接" title="检测点：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.8.0_312 &amp;&amp; app.jar</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="题目5225-编排部署erp管理系统10分">【题目5】2.2.5 编排部署ERP管理系统[1.0分]<a href="#题目5225-编排部署erp管理系统10分" class="hash-link" aria-label="【题目5】2.2.5 编排部署ERP管理系统[1.0分]的直接链接" title="【题目5】2.2.5 编排部署ERP管理系统[1.0分]的直接链接" translate="no">​</a></h3>
<p>编写docker-compose.yaml文件，要求使用镜像mysql、redis、nginx和erp完成ERP管理系统的编排部署。完成后编排部署ERP管理系统，然后提交master节点的IP地址、用户名和密码到答题框。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# vim docker-compose.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version: &#x27;3&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  erp-mysql:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image: erp-mysql:v1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    container_name: erp-mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - 3306:3306</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - MYSQL_DATABASE=jsh_erp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  erp-redis:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image: erp-redis:v1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    container_name: erp-redis</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - 6379:6379</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    command: redis-server --port 6379 --requirepass tshoperp --appendonly yes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  erp-server:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image: erp-service:v1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    container_name: erp-server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - 9999:9999</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  erp-web-ui:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image: erp-nginx:v1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    container_name: erp-nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - 8888:80</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# docker-compose up -d</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测-5">检测：<a href="#检测-5" class="hash-link" aria-label="检测：的直接链接" title="检测：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ERP]# curl -L $(hostname -i):8888</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">……</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /* 滚动条优化 end */&lt;/style&gt;&lt;script&gt;function getPlatform(type) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      let res = &#x27;&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      let ajax = new XMLHttpRequest();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      let url = window._CONFIG[&#x27;domianURL&#x27;] + &#x27;/platformConfig/getPlatform/&#x27; + type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ajax.onreadystatechange = function () {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (ajax.readyState===4 &amp;&amp;ajax.status===200) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          res = ajax.responseText;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          res = &#x27;ERP系统&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ajax.open(&#x27;get&#x27;, url, false);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ajax.send(null);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return res;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    window._CONFIG = {};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    window._CONFIG[&#x27;domianURL&#x27;] = &#x27;/jshERP-boot&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // window._CONFIG[&#x27;domianURL&#x27;] = &#x27;https://sdyq-erp-t-api.debug-online.cn/jshERP-boot&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    let statisticsCode = &#x27;1cd9bcbaae133f03a6eb19da6579aaba&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    window.SYS_TITLE = getPlatform(&quot;name&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    window.SYS_URL = getPlatform(&quot;url&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    window._statistics = &#x27;https://hm.baidu.com/hm.js?&#x27; + statisticsCode</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    document.title = window.SYS_TITLE;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //statistics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var _hmt = _hmt || [];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    (function() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">……</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检测点-4">检测点：<a href="#检测点-4" class="hash-link" aria-label="检测点：的直接链接" title="检测点：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ERP系统</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="题目6226-部署gitlab-10分">【题目6】2.2.6 部署GitLab [1.0分]<a href="#题目6226-部署gitlab-10分" class="hash-link" aria-label="【题目6】2.2.6 部署GitLab [1.0分]的直接链接" title="【题目6】2.2.6 部署GitLab [1.0分]的直接链接" translate="no">​</a></h3>
<p>在Kubernetes集群中新建命名空间gitlab-ci，将GitLab部署到该命名空间下，Deployment和Service名称均为gitlab，以NodePort方式将80端口对外暴露为30880，设置GitLab服务root用户的密码为admin@123，将项目包demo-2048.tar.gz导入到GitLab中并命名为demo-2048。完成后提交master节点的用户名、密码和IP地址到答题框。（需要用到的软件包：CICD-Runner.tar.gz）</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# curl -O http://172.29.20.222/2023/competition/Gitlab-CI.tar.gz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# tar -xzvf Gitlab-CI.tar.gz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# scp gitlab-ci/images/images.tar k8s-worker-node1:/root/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# ctr -n k8s.io image import gitlab-ci/images/images.tar  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-worker-node1 ~]# ctr -n k8s.io image import images.tar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# kubectl create ns gitlab-ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# cd gitlab-ci/   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# vi gitlab-deploy.yaml </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    name: gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: gitlab-ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name: gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name: gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        name: gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - image: docker.io/gitlab/gitlab-ce:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        name: gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        imagePullPolicy: IfNotPresent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        env:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - name: GITLAB_ROOT_PASSWORD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          value: Abc@1234</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - name: GITLAB_ROOT_EMAIL</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          value: 123456@qq.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - name: http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          containerPort: 80</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        volumeMounts:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - name: gitlab-config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          mountPath: /etc/gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - name: gitlab-logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          mountPath: /var/log/gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - name: gitlab-data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          mountPath: /var/opt/gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - name: gitlab-config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        hostPath:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          path: /home/gitlab/conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - name: gitlab-logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        hostPath:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          path: /home/gitlab/logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - name: gitlab-data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        hostPath:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          path: /home/gitlab/data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    name: gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: gitlab-ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  type: NodePort</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - name: http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 80</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    targetPort: http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    nodePort: 30880</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    name: gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# kubectl apply -f gitlab-deploy.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# kubectl -n gitlab-ci get all -owide</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Warning: kubevirt.io/v1 VirtualMachineInstancePresets is now deprecated and will be removed in v2.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                          READY   STATUS    RESTARTS   AGE   IP            NODE               NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pod/gitlab-5945f868c9-5gpsn   1/1     Running   0          4s    10.244.1.21   k8s-worker-node1   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME             TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE   SELECTOR</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/gitlab   NodePort   10.96.100.235   &lt;none&gt;        80:30880/TCP   4s    name=gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                     READY   UP-TO-DATE   AVAILABLE   AGE   CONTAINERS   IMAGES                              SELECTOR</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/gitlab   1/1     1            1           4s    gitlab       docker.io/gitlab/gitlab-ce:latest   name=gitlab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                DESIRED   CURRENT   READY   AGE   CONTAINERS   IMAGES                              SELECTOR</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">replicaset.apps/gitlab-5945f868c9   1         1         1       4s    gitlab       docker.io/gitlab/gitlab-ce:latest   name=gitlab,pod-template-hash=5945f868c9</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# kubectl -n kube-system edit configmaps coredns </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           fallthrough in-addr.arpa ip6.arpa</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           ttl 30</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        #添加</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        hosts {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            10.244.0.14 gitlab-5945f868c9-d5dff</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fallthrough</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        prometheus :9153</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        forward . /etc/resolv.conf {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           max_concurrent 1000</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="访问gitlab">访问Gitlab：<a href="#访问gitlab" class="hash-link" aria-label="访问Gitlab：的直接链接" title="访问Gitlab：的直接链接" translate="no">​</a></h3>
<p>root/Abc@1234</p>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/1" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/2" alt="img" class="img_ev3q"></p>
<p>#如出现以下页面点击这里即可
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/3" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/4" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/5" alt="img" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="创建项目">创建项目：<a href="#创建项目" class="hash-link" aria-label="创建项目：的直接链接" title="创建项目：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 ~]# cd gitlab-ci/demo-2048/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 demo-2048]# vi template/demo-2048.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - name: demo-2048</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          image: 172.29.20.207/demo/demo:latest   #这里改为本机IP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            - containerPort: 8080</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              name: demo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 demo-2048]# vi Dockerfiles/Dockerfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FROM 172.29.20.207/library/tomcat:8.5.64-jdk8  #这里改为本机IP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN rm -rf /usr/local/tomcat/webapps/ROOT/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ADD 2048 /usr/local/tomcat/webapps/ROOT/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 demo-2048]# git config --global user.name &quot;administrator&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 demo-2048]# git config --global user.email &quot;admin@example.com&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 demo-2048]# git remote remove origin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 demo-2048]# git remote add origin http://172.29.20.207:30880/root/demo-2048.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 demo-2048]# git add .</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 demo-2048]# git commit -m &quot;test&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 demo-2048]# git push -u origin drone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Username for &#x27;http://172.29.20.207:30880&#x27;: root    #gitlab账户</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Password for &#x27;http://root@172.29.20.207:30880&#x27;: #密码  Abc@1234</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Counting objects: 366, done.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Delta compression using up to 8 threads.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Compressing objects: 100% (182/182), done.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Writing objects: 100% (366/366), 122.76 KiB | 0 bytes/s, done.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Total 366 (delta 162), reused 352 (delta 153)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">remote: Resolving deltas: 100% (162/162), done.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">remote: </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">remote: To create a merge request for drone, visit:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">remote:   http://gitlab-5945f868c9-5gpsn/root/demo-2048/-/merge_requests/new?merge_request%5Bsource_branch%5D=drone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">remote: </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To http://172.29.20.207:30880/root/demo-2048.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * [new branch]      drone -&gt; drone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Branch drone set up to track remote branch drone from origin.</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检查">检查：<a href="#检查" class="hash-link" aria-label="检查：的直接链接" title="检查：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl -n gitlab-ci exec deploy/gitlab -- gitlab-ctl service-list</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检查点">检查点：<a href="#检查点" class="hash-link" aria-label="检查点：的直接链接" title="检查点：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">prometheus* || gitlab-workhorse* || postgresql* || redis*</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检查-1">检查：<a href="#检查-1" class="hash-link" aria-label="检查：的直接链接" title="检查：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -L http://$(hostname -i):30880/admin</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="检查点-1">检查点：<a href="#检查点-1" class="hash-link" aria-label="检查点：的直接链接" title="检查点：的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">GitLab is a single application for the entire software development lifecycle</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="题目7227-部署gitlab-runner-10分">【题目7】2.2.7 部署GitLab Runner [1.0分]<a href="#题目7227-部署gitlab-runner-10分" class="hash-link" aria-label="【题目7】2.2.7 部署GitLab Runner [1.0分]的直接链接" title="【题目7】2.2.7 部署GitLab Runner [1.0分]的直接链接" translate="no">​</a></h3>
<p>将GitLab Runner部署到gitlab-ci命名空间下，Release名称为gitlab-runner，为GitLab Runner创建持久化构建缓存目录/home/gitlab-runner/ci-build-cache以加速构建速度，并将其注册到GitLab中。完成后提交master节点的用户名、密码和IP地址到答题框。（需要用到的软件包：CICD-Runner.tar.gz）</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 demo-2048]# cd ..</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# kubectl -n gitlab-ci create sa gitlab-ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# kubectl -n gitlab-ci create role --resource=&quot;*&quot; --verb=&quot;*&quot; gitlab-ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# kubectl -n gitlab-ci create rolebinding --role=gitlab-ci --serviceaccount=gitlab-ci:gitlab-ci gitlab-ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# kubectl create clusterrolebinding --clusterrole=cluster-admin --serviceaccount=gitlab-ci:default default</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/6" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/7" alt="img" class="img_ev3q"></p>
<p>#这里可以看到注册令牌 复制等会需要用到</p>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/8" alt="img" class="img_ev3q"></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# tar -xzvf gitlab-runner-0.43.0.tgz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#修改values.yaml文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@master gitlab-ci]# vi gitlab-runner/values.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ## Use the following Kubernetes Service Account name if RBAC is disabled in this Helm chart (see rbac.create)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ##</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # serviceAccountName: default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  serviceAccountName: gitlab-ci   #添加，注意缩进格式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">... </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## The GitLab Server URL (with protocol) that want to register the runner against</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## ref: https://docs.gitlab.com/runner/commands/index.html#gitlab-runner-register</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">##</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># gitlabUrl: http://gitlab.your-domain.com/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gitlabUrl: http://10.24.2.14:30880/      #添加，缩进顶格</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## The Registration Token for adding new Runners to the GitLab Server. This must</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## be retrieved from your GitLab Instance.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## ref: https://docs.gitlab.com/ce/ci/runners/index.html</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">##</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># runnerRegistrationToken: &quot;&quot; </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">runnerRegistrationToken: &quot;riU8c4D2SNkKAv8GS9q_&quot;  #这里使用的是上面复制的token</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  config: |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    [[runners]]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      [runners.kubernetes]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        namespace = &quot;{{.Release.Namespace}}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        image = &quot;ubuntu:16.04&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        privileged = true     #添加，注意缩进格式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#创建一个PVC用于挂载到Pod中使用：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# vi gitlab-runner/templates/pvc.yaml </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: PersistentVolume</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type: local</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: ci-build-cache-pv</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: gitlab-ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  storageClassName: manual</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  accessModes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - ReadWriteOnce</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  capacity:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    storage: 10Gi</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  hostPath:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    path: &quot;/opt/ci-build-cache&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: PersistentVolumeClaim</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: ci-build-cache-pvc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: gitlab-ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  storageClassName: manual</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  accessModes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - ReadWriteOnce</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  resources:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    requests:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      storage: 5Gi</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#编辑values.yaml文件，在最后一行后添加构建缓存信息配置：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@master gitlab-ci]# vi gitlab-runner/values.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## configure build cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cibuild:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  cache:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pvcName: ci-build-cache-pvc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mountPath: /home/gitlab-runner/ci-build-cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@master gitlab-ci]# vi gitlab-runner/templates/configmap.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cat &gt;&gt;/home/gitlab-runner/.gitlab-runner/config.toml &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      [[runners.kubernetes.volumes.pvc]]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name = &quot;{{.Values.cibuild.cache.pvcName}}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      mount_path = &quot;{{.Values.cibuild.cache.mountPath}}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    EOF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Start the runner   #在这一行上面添加</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    exec /entrypoint run --user=gitlab-runner \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --working-directory=/home/gitlab-runner</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# helm -n gitlab-ci install gitlab-runner gitlab-runner</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME: gitlab-runner</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">LAST DEPLOYED: Wed Jan 10 16:46:30 2024</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAMESPACE: gitlab-ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">STATUS: deployed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REVISION: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TEST SUITE: None</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NOTES:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Your GitLab Runner should now be registered against the GitLab instance reachable at: &quot;http://172.29.20.207:30880/&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Runner namespace &quot;gitlab-ci&quot; was found in runners.config template.</span><br></span></code></pre></div></div>
<p>#可以看到Runner状态为online，表明已经注册成功。</p>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/9" alt="img" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="题目8228-部署gitlab-agent-10分">【题目8】2.2.8 部署GitLab Agent [1.0分]<a href="#题目8228-部署gitlab-agent-10分" class="hash-link" aria-label="【题目8】2.2.8 部署GitLab Agent [1.0分]的直接链接" title="【题目8】2.2.8 部署GitLab Agent [1.0分]的直接链接" translate="no">​</a></h3>
<p>将Kubernetes集群添加到demo-2048项目中，并命名为kubernetes-agent，项目命名空间选择gitlab-ci。完成后提交master节点的用户名、密码和IP地址到答题框。（需要用到的软件包：CICD-Runner.tar.gz）</p>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/10" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/11" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/12" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/13" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/14" alt="img" class="img_ev3q"></p>
<p>#添加 .gitlab/agents/kubernetes-agent/config.yaml (main 添加)
#文件格式如下：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">gitops</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">manifest_projects</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> root/demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token number">2048</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">default_namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> gitlab</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">glob</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/**/*.{yaml,yml,json}&#x27;</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/15" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/16" alt="img" class="img_ev3q"></p>
<p>#创建完到下面这个页面 复制框选的地方 更改完进行执行</p>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/17" alt="img" class="img_ev3q"></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# helm upgrade --install kubernetes-agent gitlab-agent-1.1.0.tgz --namespace gitlab-ci  --create-namespace --set image.tag=v16.2.0 --set config.token=PNYDa-ZWshXX1stKHJbu285mprTZiY79spshsbkQ_udGs1HPSA --set config.kasAddress=ws://gitlab-5945f868c9-5gpsn/-/kubernetes-agent/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Release &quot;kubernetes-agent&quot; does not exist. Installing it now.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME: kube4rnetes-agent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">LAST DEPLOYED: Wed Jan 10 16:54:54 2024</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAMESPACE: gitlab-ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">STATUS: deployed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REVISION: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TEST SUITE: None</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/18" alt="img" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="题目9229-构建cicd-20分">【题目9】2.2.9 构建CI/CD [2.0分]<a href="#题目9229-构建cicd-20分" class="hash-link" aria-label="【题目9】2.2.9 构建CI/CD [2.0分]的直接链接" title="【题目9】2.2.9 构建CI/CD [2.0分]的直接链接" translate="no">​</a></h3>
<p>编写流水线脚本.gitlab-ci.yml触发自动构建，具体要求如下：（1）基于镜像maven:3.6-jdk-8构建项目的drone分支；（2）构建镜像的名称：demo<!-- -->:latest<!-- -->；（3）将镜像推送到Harbor仓库demo项目中；（4）将demo-2048应用自动发布到Kubernetes集群gitlab-ci命名空间下。完成后提交master节点的用户名、密码和IP地址到答题框。（需要用到的软件包：CICD-Runner.tar.gz）</p>
<p>#登录Harbor仓库新建一个公开项目demo</p>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/19" alt="img" class="img_ev3q"></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# ctr -n k8s.io images tag docker.io/library/tomcat:8.5.64-jdk8 172.29.20.107/library/tomcat:8.5.64-jdk8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# ctr -n k8s.io images push 172.29.20.107/library/tomcat:8.5.64-jdk8 --plain-http=true --user admin:Harbor12345</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#修改containerd配置文件：worker节点也需修改</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# vi /etc/containerd/config.toml </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors.&quot;172.29.20.107&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          endpoint = [&quot;http://172.29.20.107&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# systemctl daemon-reload </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[root@k8s-master-node1 gitlab-ci]# systemctl restart containerd</span><br></span></code></pre></div></div>
<p>#切换项目</p>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/20" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/21" alt="img" class="img_ev3q"><br>
<img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/22" alt="img" class="img_ev3q"></p>
<p>#.gitlab-ci.yml</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> review</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">MAVEN_OPTS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-Dmaven.repo.local=/opt/cache/.m2/repository&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">maven_build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> maven</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">3.6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">jdk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token number">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">stage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">only</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> drone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> cp </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">r /opt/repository /opt/cache/.m2/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> mvn clean install </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">DskipTests=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> cd target </span><span class="token important">&amp;&amp;</span><span class="token plain"> jar </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">xf 2048.war</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> cp </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">rfv 2048 /home/gitlab</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">runner/ci</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">image_build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> docker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">18.09.7</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">stage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">DOCKER_DRIVER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> overlay</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">DOCKER_HOST</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">2375</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">#CI_DEBUG_TRACE: &quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> docker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">18.09.7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">dind</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;--insecure-registry=0.0.0.0/0&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> cp </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">rfv /home/gitlab</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">runner/ci</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cache/2048 .</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> docker build </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">t demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">latest </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">f ./Dockerfiles/Dockerfile .</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> docker tag demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">latest 172.29.20.103/demo/demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">latest   </span><span class="token comment" style="color:rgb(98, 114, 164)">#IP更换为本机IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> docker login </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">u admin </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">p Harbor12345 172.29.20.103</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> docker push 172.29.20.103/demo/demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">deploy_review</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kubectl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">1.22</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">stage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> review</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">only</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> drone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> kubectl apply </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">f template/</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="http://miragedge.top/assets/images/md/23" alt="img" class="img_ev3q"></p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#任务4kubernetes容器云平台搭建50分" class="table-of-contents__link toc-highlight">【任务4】Kubernetes容器云平台搭建[5.0分]</a><ul><li><a href="#适用平台私有云" class="table-of-contents__link toc-highlight">【适用平台】私有云</a></li><li><a href="#题目1211-部署容器云平台50分" class="table-of-contents__link toc-highlight">【题目1】2.1.1 部署容器云平台[5.0分]</a></li><li><a href="#检测" class="table-of-contents__link toc-highlight">检测：</a></li></ul></li><li><a href="#任务5kubernetes容器云服务运维100分" class="table-of-contents__link toc-highlight">【任务5】Kubernetes容器云服务运维[10.0分]</a><ul><li><a href="#适用平台私有云-1" class="table-of-contents__link toc-highlight">【适用平台】私有云</a></li><li><a href="#题目1221-容器化部署mariadb-05分" class="table-of-contents__link toc-highlight">【题目1】2.2.1 容器化部署MariaDB [0.5分]</a></li><li><a href="#检测-1" class="table-of-contents__link toc-highlight">检测：</a></li><li><a href="#检测点" class="table-of-contents__link toc-highlight">检测点：</a></li><li><a href="#题目2222-容器化部署redis-05分" class="table-of-contents__link toc-highlight">【题目2】2.2.2 容器化部署Redis [0.5分]</a></li><li><a href="#检测-2" class="table-of-contents__link toc-highlight">检测：</a></li><li><a href="#检测点-1" class="table-of-contents__link toc-highlight">检测点：</a></li><li><a href="#题目3223-容器化部署nginx-05分" class="table-of-contents__link toc-highlight">【题目3】2.2.3 容器化部署Nginx [0.5分]</a></li><li><a href="#检测-3" class="table-of-contents__link toc-highlight">检测：</a></li><li><a href="#检测点-2" class="table-of-contents__link toc-highlight">检测点：</a></li><li><a href="#题目4224-容器化部署erp-05分" class="table-of-contents__link toc-highlight">【题目4】2.2.4 容器化部署ERP [0.5分]</a></li><li><a href="#检测-4" class="table-of-contents__link toc-highlight">检测：</a></li><li><a href="#检测点-3" class="table-of-contents__link toc-highlight">检测点：</a></li><li><a href="#题目5225-编排部署erp管理系统10分" class="table-of-contents__link toc-highlight">【题目5】2.2.5 编排部署ERP管理系统[1.0分]</a></li><li><a href="#检测-5" class="table-of-contents__link toc-highlight">检测：</a></li><li><a href="#检测点-4" class="table-of-contents__link toc-highlight">检测点：</a></li><li><a href="#题目6226-部署gitlab-10分" class="table-of-contents__link toc-highlight">【题目6】2.2.6 部署GitLab [1.0分]</a></li><li><a href="#访问gitlab" class="table-of-contents__link toc-highlight">访问Gitlab：</a></li><li><a href="#创建项目" class="table-of-contents__link toc-highlight">创建项目：</a></li><li><a href="#检查" class="table-of-contents__link toc-highlight">检查：</a></li><li><a href="#检查点" class="table-of-contents__link toc-highlight">检查点：</a></li><li><a href="#检查-1" class="table-of-contents__link toc-highlight">检查：</a></li><li><a href="#检查点-1" class="table-of-contents__link toc-highlight">检查点：</a></li><li><a href="#题目7227-部署gitlab-runner-10分" class="table-of-contents__link toc-highlight">【题目7】2.2.7 部署GitLab Runner [1.0分]</a></li><li><a href="#题目8228-部署gitlab-agent-10分" class="table-of-contents__link toc-highlight">【题目8】2.2.8 部署GitLab Agent [1.0分]</a></li><li><a href="#题目9229-构建cicd-20分" class="table-of-contents__link toc-highlight">【题目9】2.2.9 构建CI/CD [2.0分]</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">
        <div>
          <a href="https://beian.miit.gov.cn" id="beian" target="_blank">苏ICP备2024133820号-1</a>
        </div>
        <div>
          2020 - 2025 MiragEdge✰锐界幻境 By F.windEmiko
        </div>
        <div>
          本站由<a href="https://www.rainyun.com/FwindEmi_" id="yuyun" target="_blank">雨云</a>提供计算服务
        </div>
      </div></div></div></footer></div>
</body>
</html>